[gd_scene load_steps=15 format=3 uid="uid://dsrc10otv700k"]

[ext_resource type="PackedScene" uid="uid://bvp6i1rvvvnpu" path="res://gltf/hero.glb" id="1_t08r0"]
[ext_resource type="Script" path="res://class/CharacterInput.gd" id="2_6c5ch"]
[ext_resource type="AnimationLibrary" path="res://animation_library/man_animations.res" id="2_3838d"]
[ext_resource type="Script" path="res://class/CharacterStateMachine.gd" id="2_v13ok"]
[ext_resource type="Script" path="res://scene/CharacterStateStanding.gd" id="3_b8mqi"]
[ext_resource type="Script" path="res://scene/CharacterStateRunning.gd" id="4_q777o"]
[ext_resource type="Script" path="res://scene/CharacterStateFalling.gd" id="5_2oc0h"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_twn7t"]
radius = 0.25
height = 1.75

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_srq43"]
animation = &"man_animations/Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_n10r7"]
animation = &"man_animations/Punch"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pl3v3"]
animation = &"man_animations/Run"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_0484k"]

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_dixv2"]
fadein_time = 0.25
fadeout_time = 0.25

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_x2u1a"]
graph_offset = Vector2(-800.362, 156.501)
nodes/Animation/node = SubResource("AnimationNodeAnimation_pl3v3")
nodes/Animation/position = Vector2(-464, 256)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_srq43")
"nodes/Animation 2/position" = Vector2(-448, 112)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_n10r7")
"nodes/Animation 3/position" = Vector2(-208, 336)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_0484k")
nodes/Blend2/position = Vector2(-192, 112)
nodes/OneShot/node = SubResource("AnimationNodeOneShot_dixv2")
nodes/OneShot/position = Vector2(80, 144)
node_connections = [&"output", 0, &"OneShot", &"OneShot", 0, &"Blend2", &"OneShot", 1, &"Animation 3", &"Blend2", 0, &"Animation 2", &"Blend2", 1, &"Animation"]

[node name="Hero" type="CharacterBody3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.875, 0)
shape = SubResource("CapsuleShape3D_twn7t")

[node name="hero" parent="." instance=ExtResource("1_t08r0")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="GeneralSkeleton" parent="hero/Rig" index="0"]
bones/1/position = Vector3(-0.0025884, 0.930818, 0.00625508)
bones/1/rotation = Quaternion(-0.0320116, -0.0468789, -0.0243363, 0.998091)
bones/2/rotation = Quaternion(0.0292618, 0.0138484, 0.0233958, 0.999202)
bones/3/rotation = Quaternion(0.0100301, 0.00343634, 0.0138496, 0.999848)
bones/4/rotation = Quaternion(0.00980945, 0.00362132, 0.0139097, 0.999849)
bones/5/rotation = Quaternion(0.459871, 0.498693, 0.62998, -0.378086)
bones/6/rotation = Quaternion(0.126399, 0.801708, -0.57097, -0.123616)
bones/7/rotation = Quaternion(0.00975567, -0.707039, 0.00975587, 0.70704)
bones/8/rotation = Quaternion(0.0511342, 0.479012, -0.0141475, 0.876204)
bones/9/rotation = Quaternion(0.150998, -1.92225e-06, -0.0154738, 0.988413)
bones/10/rotation = Quaternion(0.0700819, -9.68575e-07, -0.00718167, 0.997515)
bones/11/rotation = Quaternion(2.98023e-08, -2.98023e-08, 2.98023e-08, 1)
bones/12/rotation = Quaternion(0.151255, -1.44541e-06, -0.0155001, 0.988373)
bones/13/rotation = Quaternion(0.159933, -1.51992e-06, -0.0163893, 0.986992)
bones/14/rotation = Quaternion(-2.98023e-08, 0, 0, 1)
bones/15/rotation = Quaternion(0.151258, -7.03782e-05, -0.0155004, 0.988373)
bones/16/rotation = Quaternion(0.143498, -4.91738e-07, -0.0147052, 0.989541)
bones/18/rotation = Quaternion(0.181388, -3.03984e-06, -0.0185881, 0.983236)
bones/19/rotation = Quaternion(0.155213, -2.5779e-06, -0.0159057, 0.987753)
bones/20/rotation = Quaternion(2.98023e-08, 2.98023e-08, -2.98023e-08, 1)
bones/21/rotation = Quaternion(-0.152843, 0.812142, -0.0148235, 0.56289)
bones/22/rotation = Quaternion(0.0400036, -0.0528787, -0.128589, 0.989479)
bones/23/rotation = Quaternion(1.49012e-08, -1.04308e-07, 0, 1)
bones/24/rotation = Quaternion(0.477179, -0.477631, -0.635986, -0.373753)
bones/25/rotation = Quaternion(-0.148633, 0.827997, -0.495875, 0.215492)
bones/26/rotation = Quaternion(0.0411772, 0.70591, -0.0411774, 0.705903)
bones/27/rotation = Quaternion(0.0423834, -0.57133, 0.0359969, 0.818835)
bones/28/rotation = Quaternion(0.151288, -1.3262e-06, 0.0123243, 0.988413)
bones/29/rotation = Quaternion(0.0702164, -6.70552e-07, 0.00571996, 0.997515)
bones/30/rotation = Quaternion(0, -1.49012e-08, -1.49012e-08, 1)
bones/31/rotation = Quaternion(0.151545, -1.05798e-06, 0.0123451, 0.988373)
bones/32/rotation = Quaternion(0.16024, -1.2666e-06, 0.0130535, 0.986992)
bones/33/rotation = Quaternion(-1.49012e-08, -1.49012e-08, -1.49012e-08, 1)
bones/34/rotation = Quaternion(0.151548, 1.14739e-06, 0.0123455, 0.988373)
bones/35/rotation = Quaternion(0.143773, -1.93715e-06, 0.011712, 0.989541)
bones/36/rotation = Quaternion(0, -5.96046e-08, 0, 1)
bones/37/rotation = Quaternion(0.181736, -5.96047e-08, 0.0148046, 0.983236)
bones/38/rotation = Quaternion(0.15551, -1.3411e-07, 0.0126683, 0.987753)
bones/39/rotation = Quaternion(0, -2.98023e-08, -2.98023e-08, 1)
bones/40/rotation = Quaternion(-0.121719, -0.819587, 0.0371544, 0.558643)
bones/41/rotation = Quaternion(0.0455579, 0.046076, 0.161691, 0.984712)
bones/42/rotation = Quaternion(-1.49012e-08, -1.04308e-07, 0, 1)
bones/43/rotation = Quaternion(0.0492007, -0.00141787, 0.0048024, 0.998776)
bones/44/rotation = Quaternion(-0.0686147, 0.0104199, -0.000984269, 0.997588)
bones/45/rotation = Quaternion(0.135845, 0.0745497, 0.985122, -0.074315)
bones/46/rotation = Quaternion(-0.0391804, 0.993399, -0.106961, 0.0135461)
bones/47/rotation = Quaternion(-0.0427024, 0.711523, -0.699548, 0.0504389)
bones/48/rotation = Quaternion(-9.30194e-08, 0.999075, 0.0429963, -9.05499e-09)
bones/49/rotation = Quaternion(-0.0925922, -0.0164127, 0.995197, -0.0271928)
bones/50/rotation = Quaternion(0.0333543, 0.994346, -0.0564421, -0.0835338)
bones/51/rotation = Quaternion(0.0110334, 0.680747, -0.731948, -0.0267118)
bones/52/rotation = Quaternion(-4.18622e-07, 0.998142, 0.0609345, 5.92618e-07)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../hero/Rig/GeneralSkeleton")
libraries = {
"man_animations": ExtResource("2_3838d")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_x2u1a")
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/Blend2/blend_amount = 0.0
parameters/OneShot/active = false
parameters/OneShot/internal_active = false
parameters/OneShot/request = 0

[node name="CharacterInput" type="Node" parent="."]
script = ExtResource("2_6c5ch")

[node name="CharacterStateMachine" type="Node" parent="." node_paths=PackedStringArray("body", "animation_player", "animation_tree", "initial_state", "input")]
script = ExtResource("2_v13ok")
body = NodePath("..")
animation_player = NodePath("../AnimationPlayer")
animation_tree = NodePath("../AnimationTree")
initial_state = NodePath("CharacterStateStanding")
input = NodePath("../CharacterInput")

[node name="CharacterStateStanding" type="Node" parent="CharacterStateMachine" node_paths=PackedStringArray("running_state", "falling_state")]
script = ExtResource("3_b8mqi")
running_state = NodePath("../CharacterStateRunning")
falling_state = NodePath("../CharacterStateFalling")

[node name="CharacterStateRunning" type="Node" parent="CharacterStateMachine" node_paths=PackedStringArray("standing_state", "falling_state")]
script = ExtResource("4_q777o")
standing_state = NodePath("../CharacterStateStanding")
falling_state = NodePath("../CharacterStateFalling")
speed = 50

[node name="CharacterStateFalling" type="Node" parent="CharacterStateMachine" node_paths=PackedStringArray("standing_state", "running_state")]
script = ExtResource("5_2oc0h")
standing_state = NodePath("../CharacterStateStanding")
running_state = NodePath("../CharacterStateRunning")

[editable path="hero"]
